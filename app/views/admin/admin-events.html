<div class="row">
  <div class="col-sm-12 col-md-12">
  <table ng-table="eventTableParams" class="table table-condensed table-hover" show-filter="false">
    <tr ng-repeat="event in $data track by $index" ng-class="{success: event.status==2}">
      <td class="text-center" title="'#'">{{$index+1}}
      </td>
      <td class="text-center" title="'ID'" filter="{ unqId: 'text'}" sortable="'unqId'">{{event.unqId}}
      </td>
      <td class="text-center" title="'ISBN'" filter="{ isbn: 'text'}" sortable="'isbn'">
        {{event.isbn}}
      </td>
      <td class="text-center" title="'Name'" filter="{ name: 'text'}" sortable="'name'">
        {{event.name}}
      </td>
      <td class="text-center" title="'Borrower'" filter="{ borrower: 'text'}" sortable="'borrower'">
        {{event.intrID}}
      </td>
      <td class="text-center" title="'BorrowTime'" filter="{ borrowTime: 'text'}" sortable="'applyTime'">
        {{event.borrowTime | date:'yyyy-MM-dd'}}
      </td>
      <td class="text-center" title="'ReturnTime'" filter="{ returnTime: 'text'}" sortable="'returnTime'">
        {{event.returnTime | date:'yyyy-MM-dd'}}
      </td>
      <td class="text-center" title="'ApplyTime'" filter="{ applyTime: 'text'}" sortable="'applyTime'">
        {{event.applyTime | date:'yyyy-MM-dd'}}
      </td>
      <td class="text-center" title="'Status'" filter="{ status: 'select'}" filter-data="[{ id: '', title: 'All'},{ id: '0', title: 'Free'},{ id: '1', title: 'Reserved'},{ id: '2', title: 'Borrowed'}]" sortable="'status'">
        {{event.status==0? 'Free':(event.status==1?'Reserved':'Borrowed')}}
      </td>
      <td class="text-center" title="'Manage'">
        <button type="button" class="btn btn-success" ng-click="accept(event)" ng-hide="event.status!=1">Deliver</button>
        <button type="button" class="btn btn-danger" ng-click="return(event)"  ng-hide="event.status!=2">Return</button>
      </td>
    </tr>
  </table>
  </div>
</div>

<div class="modal fade" id="warningModal" tabindex="-1" role="dialog" aria-labelledby="warningModalLabel">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Warning</h4>
      </div>
      <div class="modal-body">
        <p>Failed to deliver the <strong>{{curEvent.name}}</strong>, please try again.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="returnModal" tabindex="-1" role="dialog" aria-labelledby="returnModalLabel">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Warning</h4>
      </div>
      <div class="modal-body">
        <p>Failed to return the <strong>{{curEvent.name}}</strong>, please try again.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
      </div>
    </div>
  </div>
</div>
